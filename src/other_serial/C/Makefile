
#CFLAGS= -O3
#CFLAGS= -std=c99
LFLAGS= -lm
CC= gcc -Wall ${CFLAGS}

SRC= spmat_utils.h spmat_utils.c 
  SRC+=histo.c 
  SRC+=ig.c 
  SRC+=randperm.c 
  SRC+=toposort.c 
  SRC+=triangle.c 
  SRC+=unionfind.c 
  SRC+=transpose_matrix.c
  SRC+=permute_matrix.c
  SRC+=sssp.c
  SRC+=sssp_dijsktra.c
  SRC+=sssp_bellmanford.c
  SRC+=demo_spmat.c

EXE= histo 
  EXE+=ig 
  EXE+=randperm 
  EXE+=topo 
  EXE+=triangles 
  EXE+=unionfind
  EXE+=transpose_matrix
  EXE+=permute_matrix
  EXE+=sssp
  EXE+=demo_spmat

DOC= mainpage.h Doxyfile

OBJ= spmat_utils.o std_options.o

GRAPHS= demo.mm 10_ring.mm 2comps.mm

all: docs std_options.o spmat_utils.o ${EXE}

std_options.o: std_options.c std_options.h
	${CC} -g -c std_options.c

spmat_utils.o: spmat_utils.c spmat_utils.h
	${CC} -c spmat_utils.c -lm

demo_spmat: demo_spmat.c spmat_utils.o 
	${CC} demo_spmat.c spmat_utils.o ${LFLAGS} -o demo_spmat

histo: histo.c std_options.o spmat_utils.o 
	${CC} -g histo.c std_options.o spmat_utils.o ${LFLAGS} ${LDFLAGS} -o histo

ig: ig.c std_options.o spmat_utils.o 
	${CC} ig.c std_options.o spmat_utils.o ${LFLAGS} ${LDFLAGS} -o ig

randperm: randperm.c std_options.o spmat_utils.o
	${CC} randperm.c std_options.o spmat_utils.o ${LFLAGS} ${LDFLAGS} -o randperm

topo: toposort.c std_options.o spmat_utils.o
	${CC} toposort.c std_options.o spmat_utils.o ${LFLAGS} ${LDFLAGS} -o topo

triangles: triangle.c std_options.o spmat_utils.o
	${CC} -g triangle.c std_options.o spmat_utils.o ${LFLAGS} ${LDFLAGS} -o triangles

unionfind: unionfind.c std_options.o spmat_utils.o
	${CC} unionfind.c std_options.o spmat_utils.o ${LFLAGS} ${LDFLAGS} -o unionfind

permute_matrix: permute_matrix.c std_options.o spmat_utils.o
	${CC} permute_matrix.c std_options.o spmat_utils.o ${LFLAGS} ${LDFLAGS} -o permute_matrix

transpose_matrix: transpose_matrix.c std_options.o spmat_utils.o
	${CC} -g transpose_matrix.c spmat_utils.o std_options.o ${LFLAGS} ${LDFLAGS} -o transpose_matrix

sssp: sssp.c sssp_dijsktra.c sssp_delta.c sssp_bellmanford.c std_options.o spmat_utils.o
	${CC} sssp.c sssp_dijsktra.c sssp_delta.c sssp_bellmanford.c std_options.o spmat_utils.o ${LFLAGS} ${LDFLAGS} -o sssp

docs:
	doxygen

clean:
	rm -f *.out ${EXE} ${OBJ}
	rm -rf latex html
